 counterfactual risk minimization learning log bandit feedback develop learning principle efficient algorithm batch learning log bandit feedback learning setting ubiquitous online system e.g. ad placement web search recommendation algorithm make prediction e.g. ad ranking give input e.g. query observe bandit feedback e.g. user click presented ad first address counterfactual nature learning problem propensity scoring next prove generalization error bound account variance propensity-weighted empirical risk estimator constructive bound give rise counterfactual risk minimization crm principle show crm use derive new learning method -- call policy optimizer exponential model poem -- learn stochastic linear rule structure output prediction present decomposition poem objective enable efficient stochastic gradient optimization poem evaluate several multi-label classification problem show substantially improve robustness generalization performance compare state-of-the-art