 discrete structural planning neural machine translation structural planning important produce long sentence miss part current language generation model work add planning phase neural machine translation control coarse structure output sentence model first generate planner code predict real output word condition code learn capture coarse structure target sentence order obtain code design end-to-end neural network discretization bottleneck predict simplified part-of-speech tag target sentence experiment show translation performance generally improve plan ahead also find translation different structure obtain manipulate planner code